{% load clear_filter %}
{% load lookup %}
<div class="govuk-grid-column-one-third">
  <div class="moj-filter">
    <div class="moj-filter__header">
      <div class="moj-filter__header-title">
        <h2 class="govuk-heading-m">Filter</h2>
      </div>
      <div class="moj-filter__header-action">
      </div>
    </div>
    <div class="moj-filter__content">
      {% if remove_filter_hrefs|get_keys|length > 0 %}
        {% include "partial/selected_filters.html" %}
      {% endif %}
      <div class="moj-filter__options">
      <input type="submit" class="govuk-button apply_filters" value="Apply filters"/>
        <div class="govuk-form-group">
          <fieldset class="govuk-fieldset">
            <legend class="govuk-fieldset__legend govuk-fieldset__legend--m">Subject area</legend>
            <div class="govuk-form-group">
              {{ form.subject_area }}
            </div>
          </fieldset>
        </div>
        <div class="govuk-form-group">
          <fieldset class="govuk-fieldset">
            <legend class="govuk-fieldset__legend govuk-fieldset__legend--m">Asset types</legend>
            <div class="govuk-checkboxes govuk-checkboxes--small" data-module="govuk-checkboxes">
              {% for entity_type, count in entity_type_counts %}
                  <div aria-label="selection will trigger the filter and refresh the search results" class="govuk-checkboxes__item">
                    <input type="checkbox" name="entity_types" value="{{ entity_type.name }}"class="govuk-checkboxes__input" form="searchform"
                            id="id_entity_types_{{ forloop.counter0 }}" {% if entity_type.name in request.GET|getlist:"entity_types" %}checked{% endif %}>
                    <label class="govuk-label govuk-checkboxes__label" for="{{ entity_type.id_for_label }}">{{ entity_type.value }} ({{ count }})</label>
                  </div>
              {% endfor %}
            </div>
          </fieldset>
        </div>
        <div class="govuk-form-group">
          <fieldset class="govuk-fieldset">
            <legend class="govuk-fieldset__legend govuk-fieldset__legend--m">Tags</legend>
            <div class="govuk-checkboxes govuk-checkboxes--small" data-module="govuk-checkboxes">
              {% if tags %}
                {% for tag in tags %}
                  <div aria-label="selection will trigger the filter and refresh the search results"
                       class="govuk-checkboxes__item">
                    <input type="checkbox" name="tags" value="{{ tag.name }}"
                           class="govuk-checkboxes__input" form="searchform"
                            id="id_tags_{{ forloop.counter0 }}" {% if tag.name in request.GET|getlist:"tags" %}checked{% endif %}>
                    <label class="govuk-label govuk-checkboxes__label"
                           for="id_tags_{{ forloop.counter0 }}">  {{ tag.name }} ({{ tag.count }})
                    </label>
                  </div>
                {% endfor %}
              {% else %}
                   <p>
                     No Tags
                    </p>
              {% endif %}
            </div>
          </fieldset>
        </div>
      </div>
    </div>
  </div>
</div>
