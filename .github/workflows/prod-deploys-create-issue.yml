name: Create issue for push to prod
on:
  #   schedule:
  #     # Runs every two weeks on Monday at 9:00 AM
  #     - cron: "0 9 */14 * *"
  pull_request:

jobs:
  create_issue:
    permissions:
      repository-projects: write
    runs-on: ubuntu-latest
    env:
      GITHUB_TOKEN: ${{secrets.GITHUB_TOKEN}}
    steps:
      - uses: actions/checkout@v2

      - name: Create issue
        env:
          project: "Data Catalogue"
          label: "deployment"
          title: ":rocket: Deploy to production: ${{ github.event.repository.updated_at }}"
          body: "Deploy to production: ${{ github.event.repository.updated_at }}"
        run: |
          gh issue create --project "$project" --title "$title" --body "$body" --label "$label"
